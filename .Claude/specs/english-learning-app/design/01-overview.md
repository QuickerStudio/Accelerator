# 概述 - 英语学习应用

## 应用简介

本应用是一个基于Kotlin开发的Android英语学习应用，集成了3B参数的本地AI模型（Qwen2.5-3B-Instruct），提供单词学习、AI口语训练和写作练习三大核心功能。应用采用Jetpack Compose构建现代化UI，采用深色主题设计风格，支持完全离线的AI功能，包括语音识别、语音合成、语法检查和智能对话。

## 核心技术栈

### 前端框架
- **UI框架**: Kotlin + Jetpack Compose + Material Design 3
- **架构模式**: MVVM + Clean Architecture
- **依赖注入**: Hilt
- **异步处理**: Kotlin Coroutines + Flow
- **导航**: Navigation Compose

### AI 模型（简化架构）
- **统一 LLM**: Qwen2.5-3B-Instruct (Q4_K_M, ~2GB)
  - 用途：单词解释、语法检查、作文批改、对话生成
  - 推理库：kotlinllamacpp (GGUF 格式)
  - 优化：ARM NEON 指令集优化
  
- **语音识别**: Whisper Tiny (~75MB)
  - 用途：语音转文本
  - 集成：whisper.cpp Android 绑定
  
- **语音合成**: Android 系统 TTS
  - 用途：文本转语音
  - 优势：系统级优化，无需额外模型

### 数据存储
- **本地数据库**: Room Database
- **设置持久化**: DataStore（替代 SharedPreferences）
- **文件存储**: 用户头像、音频文件、导出数据

### 后台任务
- **定时任务**: WorkManager（自动朗读、学习提醒）

## 核心功能

### 1. 单词学习
- 每日单词推送
- 单词卡片滑动交互（左滑未记住、右滑已记住）
- 双击播放发音
- 长按收藏到单词本
- AI 单词解释（使用统一 LLM）
- 学习进度追踪

### 2. AI口语训练
- 实时语音识别（Whisper）
- AI对话生成（使用统一 LLM）
- 发音评估和建议
- 对话历史记录
- TTS 语音播放

### 3. 写作练习
- 实时语法检查（使用统一 LLM）
- 错误标注和建议
- AI全文审查（使用统一 LLM）
- 语法评分（0-100分）
- 作文保存和管理

### 4. 笔记管理
- 侧边栏笔记列表
- 笔记分组管理
- 学习日志记录
- 搜索和置顶功能

### 5. 设置与个性化
- 4种主题切换（白色、暗色、苹果绿、亮紫）
- TTS 音色和语速设置
- AI 模型参数调节
- 学习提醒和自动朗读
- 数据导入导出

## 设计原则

- **完全离线**: 所有AI功能在本地运行，无需网络连接
- **隐私优先**: 用户数据不上传云端，本地加密存储
- **统一架构**: 单一 LLM 处理所有文本任务，简化模型管理
- **性能优化**: 模型量化（Q4）和ARM优化，确保流畅体验
- **用户友好**: 简洁直观的UI，清晰的反馈机制
- **可扩展性**: 模块化架构，易于添加新功能

## 系统要求

### 最低要求
- Android 10.0 (API 29) 或更高
- 6GB RAM
- 4GB 可用存储空间（含模型）
- ARMv8-A 64位处理器（arm64-v8a）

### 推荐配置
- Android 12.0 (API 31) 或更高
- 12GB RAM（现代中高端手机标配）
- 6GB 可用存储空间
- 支持 i8mm 和 dotprod 指令的 ARM 处理器（如骁龙8系列、天玑9000系列）

### 存储空间分配
- Qwen2.5-3B 模型：~2GB
- Whisper Tiny 模型：~75MB
- 应用代码和资源：~50MB
- 用户数据（数据库、音频等）：~500MB
- **总计**：~2.6GB

## AI 模型详细配置

### Qwen2.5-3B-Instruct (统一 LLM)

**模型信息**：
- 参数量：3B（30亿）
- 量化方式：Q4_K_M（4-bit 量化）
- 文件大小：~2GB
- 上下文长度：32K tokens
- 语言支持：中文 + 英文（双语优化）

**性能指标**（骁龙8 Gen2）：
- 单词解释：2-3秒
- 语法检查：3-4秒
- 作文批改：5-8秒
- 对话生成：2-3秒
- 内存占用：3-4GB

**下载地址**：
```
https://huggingface.co/Qwen/Qwen2.5-3B-Instruct-GGUF
文件：qwen2_5-3b-instruct-q4_k_m.gguf
```

### Whisper Tiny (语音识别)

**模型信息**：
- 参数量：39M
- 文件大小：~75MB
- 语言支持：多语言（包括英语）
- 识别速度：实时

**性能指标**：
- 识别延迟：<500ms
- 准确率：~85%（日常对话）
- 内存占用：~200MB

### Android TTS (语音合成)

**系统服务**：
- 无需额外模型
- 支持多种音色
- 语速可调（0.5x-2.0x）
- 音量可调（0-100%）

## 架构优势

### 简化前（多模型方案）
```
单词解释 → 小模型A (500MB)
语法检查 → 中模型B (1GB)
作文批改 → 大模型C (2GB)
对话生成 → 中模型D (1GB)
---
总计：4.5GB，管理复杂
```

### 简化后（统一模型方案）
```
所有文本任务 → Qwen2.5-3B (2GB)
语音识别 → Whisper Tiny (75MB)
语音合成 → 系统 TTS (0MB)
---
总计：2.1GB，管理简单
```

**优势**：
- ✅ 存储空间节省 50%+
- ✅ 内存占用降低 40%+
- ✅ 代码复杂度降低 60%+
- ✅ 模型质量提升（3B > 1.5B）
- ✅ 维护成本大幅降低
