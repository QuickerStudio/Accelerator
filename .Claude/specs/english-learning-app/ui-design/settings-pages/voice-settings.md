# æœ—è¯»éŸ³è‰²è®¾ç½®é¡µé¢ (Voice Settings)

## è®¾è®¡æ€è·¯

ç”¨æˆ·å¯ä»¥é€‰æ‹©ä¸åŒçš„TTSï¼ˆæ–‡æœ¬è½¬è¯­éŸ³ï¼‰æœ—è¯»éŸ³è‰²ï¼Œæ¯ç§éŸ³è‰²éƒ½å¯ä»¥è¯•å¬ã€‚æ”¯æŒç”·å£°ã€å¥³å£°ã€ä¸åŒå£éŸ³å’Œè¯­é€Ÿè°ƒèŠ‚ã€‚é¡µé¢é‡‡ç”¨å¡ç‰‡å¼å¸ƒå±€ï¼Œå½“å‰ä½¿ç”¨çš„éŸ³è‰²ä»¥æ¸å˜å¡ç‰‡çªå‡ºæ˜¾ç¤ºï¼Œå…¶ä»–éŸ³è‰²ä»¥åˆ—è¡¨å½¢å¼å±•ç¤ºã€‚

---

## å¸ƒå±€ç»“æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é¡¶éƒ¨å¯¼èˆªæ                        â”‚
â”‚  â†  æœ—è¯»éŸ³è‰²                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  å½“å‰éŸ³è‰²                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ”Š ç¾å¼å¥³å£° (Emma)       â”‚   â”‚
â”‚  â”‚ æ¸…æ™°è‡ªç„¶ï¼Œé€‚åˆå­¦ä¹         â”‚   â”‚
â”‚  â”‚         [è¯•å¬] [âœ“]      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  æ¨èéŸ³è‰²                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ”Š ç¾å¼ç”·å£° (James)      â”‚   â”‚
â”‚  â”‚ æ²‰ç¨³ä¸“ä¸šï¼Œå‘éŸ³æ ‡å‡†        â”‚   â”‚
â”‚  â”‚         [è¯•å¬]          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ”Š è‹±å¼å¥³å£° (Sophie)     â”‚   â”‚
â”‚  â”‚ ä¼˜é›…åŠ¨å¬ï¼Œè‹±ä¼¦å£éŸ³        â”‚   â”‚
â”‚  â”‚         [è¯•å¬]          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ”Š è‹±å¼ç”·å£° (Oliver)     â”‚   â”‚
â”‚  â”‚ ç£æ€§ä½æ²‰ï¼Œæ ‡å‡†è‹±éŸ³        â”‚   â”‚
â”‚  â”‚         [è¯•å¬]          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  è¯­é€Ÿè°ƒèŠ‚                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æ…¢é€Ÿ â—â”â”â”â”â”â”â”â”â”â” å¿«é€Ÿ    â”‚   â”‚
â”‚  â”‚        1.0x             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  éŸ³é‡è°ƒèŠ‚                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ å°å£° â”â”â”â”â”â”â”â—â”â”â” å¤§å£°    â”‚   â”‚
â”‚  â”‚        80%              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## è®¾è®¡ç»†èŠ‚

### é¡¶éƒ¨å¯¼èˆªæ 
- é«˜åº¦: 64.dp
- èƒŒæ™¯: æ·±è‰² (#1E1E1E)
- å†…è¾¹è·: æ°´å¹³16.dp
- å¸ƒå±€: æ°´å¹³æ’åˆ—
- ç»„ä»¶:
  - **è¿”å›æŒ‰é’®** (â†):
    - å°ºå¯¸: 48.dp Ã— 48.dp
    - å›¾æ ‡: 24.dp, ç™½è‰²
    - ç‚¹å‡»: è¿”å›ä¸Šä¸€é¡µ
  - **æ ‡é¢˜**:
    - æ–‡æœ¬: "æœ—è¯»éŸ³è‰²", HeadlineMedium (20.sp), ç™½è‰²
    - ä½ç½®: è¿”å›æŒ‰é’®å³ä¾§

### å½“å‰éŸ³è‰²å¡ç‰‡
- å®½åº¦: match_parent - 32.dp
- é«˜åº¦: wrap_content
- åœ†è§’: CornerRadius.large (16.dp)
- èƒŒæ™¯: ä¸»é¢˜è‰²æ¸å˜ (#6366F1 â†’ #8B5CF6)
- å†…è¾¹è·: 20.dp
- è¾¹è·: æ°´å¹³16.dp, é¡¶éƒ¨16.dp
- é˜´å½±: elevation = 4.dp
- ç»„ä»¶:
  - **éŸ³è‰²å›¾æ ‡**: ğŸ”Š, 32.dp, ç™½è‰², å·¦ä¸Šè§’
  - **éŸ³è‰²åç§°**: HeadlineMedium (18.sp), ç™½è‰², ç²—ä½“
  - **éŸ³è‰²æè¿°**: BodyMedium (14.sp), ç™½è‰²é€æ˜80%
  - **è¯•å¬æŒ‰é’®**:
    - å®½åº¦: 80.dp, é«˜åº¦: 36.dp
    - åœ†è§’: CornerRadius.full
    - èƒŒæ™¯: ç™½è‰²é€æ˜20%
    - æ–‡æœ¬: "è¯•å¬", LabelMedium, ç™½è‰²
    - ä½ç½®: å³ä¸‹è§’
  - **é€‰ä¸­æ ‡è®°**: âœ“, 24.dp, ç™½è‰², å³ä¸Šè§’

### æ¨èéŸ³è‰²åŒºåŸŸ
- æ ‡é¢˜: "æ¨èéŸ³è‰²", HeadlineSmall (16.sp), ç™½è‰², ç²—ä½“
- å†…è¾¹è·: æ°´å¹³16.dp, é¡¶éƒ¨24.dp, åº•éƒ¨12.dp

### éŸ³è‰²å¡ç‰‡
- å®½åº¦: match_parent - 32.dp
- é«˜åº¦: wrap_content
- åœ†è§’: CornerRadius.large (16.dp)
- èƒŒæ™¯: æ·±è‰²å¡ç‰‡ (#2A2A2A)
- å†…è¾¹è·: 16.dp
- è¾¹è·: æ°´å¹³16.dp, åº•éƒ¨12.dp
- å¸ƒå±€: æ°´å¹³æ’åˆ—
- ç‚¹å‡»æ•ˆæœ: èƒŒæ™¯å˜ä¸ºæ·±ç° (#3A3A3A)
- ç»„ä»¶:
  - **éŸ³è‰²å›¾æ ‡**: ğŸ”Š, 24.dp, ä¸»é¢˜è‰², å·¦ä¾§
  - **éŸ³è‰²ä¿¡æ¯**:
    - éŸ³è‰²åç§°: BodyLarge (16.sp), ç™½è‰²
    - éŸ³è‰²æè¿°: BodySmall (12.sp), ç°è‰² (#94A3B8)
    - å‚ç›´æ’åˆ—ï¼Œé—´è·4.dp
  - **è¯•å¬æŒ‰é’®**:
    - å®½åº¦: 64.dp, é«˜åº¦: 32.dp
    - åœ†è§’: CornerRadius.medium (12.dp)
    - èƒŒæ™¯: ä¸»é¢˜è‰²
    - æ–‡æœ¬: "è¯•å¬", LabelSmall, ç™½è‰²
    - ä½ç½®: å³ä¾§

### å¯ç”¨éŸ³è‰²åˆ—è¡¨
1. **ç¾å¼å¥³å£° (Emma)**
   - æè¿°: æ¸…æ™°è‡ªç„¶ï¼Œé€‚åˆå­¦ä¹ 
   - ç‰¹ç‚¹: æ ‡å‡†ç¾å¼å‘éŸ³ï¼Œè¯­è°ƒæŸ”å’Œ
   
2. **ç¾å¼ç”·å£° (James)**
   - æè¿°: æ²‰ç¨³ä¸“ä¸šï¼Œå‘éŸ³æ ‡å‡†
   - ç‰¹ç‚¹: ä½æ²‰æœ‰åŠ›ï¼Œé€‚åˆæ­£å¼åœºåˆ
   
3. **è‹±å¼å¥³å£° (Sophie)**
   - æè¿°: ä¼˜é›…åŠ¨å¬ï¼Œè‹±ä¼¦å£éŸ³
   - ç‰¹ç‚¹: æ ‡å‡†è‹±å¼å‘éŸ³ï¼Œä¼˜é›…å¤§æ–¹
   
4. **è‹±å¼ç”·å£° (Oliver)**
   - æè¿°: ç£æ€§ä½æ²‰ï¼Œæ ‡å‡†è‹±éŸ³
   - ç‰¹ç‚¹: ç»…å£«é£èŒƒï¼Œå‘éŸ³çº¯æ­£

### è¯­é€Ÿè°ƒèŠ‚åŒºåŸŸ
- æ ‡é¢˜: "è¯­é€Ÿè°ƒèŠ‚", HeadlineSmall (16.sp), ç™½è‰², ç²—ä½“
- å†…è¾¹è·: æ°´å¹³16.dp, é¡¶éƒ¨24.dp, åº•éƒ¨12.dp
- æ»‘å—å¡ç‰‡:
  - å®½åº¦: match_parent - 32.dp
  - é«˜åº¦: wrap_content
  - åœ†è§’: CornerRadius.large (16.dp)
  - èƒŒæ™¯: æ·±è‰²å¡ç‰‡ (#2A2A2A)
  - å†…è¾¹è·: 20.dp
  - è¾¹è·: æ°´å¹³16.dp
  - æ»‘å—:
    - èŒƒå›´: 0.5x - 2.0x
    - é»˜è®¤: 1.0x
    - æ­¥è¿›: 0.1x
    - é¢œè‰²: ä¸»é¢˜è‰²
    - è½¨é“é«˜åº¦: 4.dp
    - æ»‘å—å°ºå¯¸: 20.dpåœ†å½¢
    - æ ‡ç­¾: å·¦ä¾§"æ…¢é€Ÿ"ï¼Œå³ä¾§"å¿«é€Ÿ"
    - å½“å‰å€¼: å±…ä¸­æ˜¾ç¤ºï¼ŒHeadlineMedium (20.sp), ç™½è‰²

### éŸ³é‡è°ƒèŠ‚åŒºåŸŸ
- æ ‡é¢˜: "éŸ³é‡è°ƒèŠ‚", HeadlineSmall (16.sp), ç™½è‰², ç²—ä½“
- å†…è¾¹è·: æ°´å¹³16.dp, é¡¶éƒ¨24.dp, åº•éƒ¨12.dp
- æ»‘å—å¡ç‰‡: æ ·å¼åŒè¯­é€Ÿè°ƒèŠ‚
  - èŒƒå›´: 0% - 100%
  - é»˜è®¤: 80%
  - æ­¥è¿›: 5%
  - æ ‡ç­¾: å·¦ä¾§"å°å£°"ï¼Œå³ä¾§"å¤§å£°"
  - å½“å‰å€¼: å±…ä¸­æ˜¾ç¤ºï¼ŒHeadlineMedium (20.sp), ç™½è‰²

---

## äº¤äº’æµç¨‹

### é€‰æ‹©éŸ³è‰²
1. ç”¨æˆ·è¿›å…¥æœ—è¯»éŸ³è‰²è®¾ç½®é¡µé¢
2. æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„éŸ³è‰²ï¼ˆæ¸å˜å¡ç‰‡æ˜¾ç¤ºï¼‰
3. æµè§ˆæ¨èéŸ³è‰²åˆ—è¡¨
4. ç‚¹å‡»éŸ³è‰²å¡ç‰‡é€‰æ‹©æ–°éŸ³è‰²
5. éŸ³è‰²ç«‹å³åˆ‡æ¢ï¼Œå½“å‰éŸ³è‰²å¡ç‰‡æ›´æ–°
6. è‡ªåŠ¨ä¿å­˜è®¾ç½®

### è¯•å¬éŸ³è‰²
1. ç”¨æˆ·ç‚¹å‡»"è¯•å¬"æŒ‰é’®
2. æ’­æ”¾è¯¥éŸ³è‰²çš„ç¤ºä¾‹è¯­éŸ³
3. è¯•å¬æŒ‰é’®æ˜¾ç¤ºæ’­æ”¾åŠ¨ç”»ï¼ˆè„‰å†²æ•ˆæœï¼‰
4. æ’­æ”¾å®ŒæˆååŠ¨ç”»åœæ­¢
5. å¯ä»¥éšæ—¶ç‚¹å‡»åœæ­¢æ’­æ”¾

### è°ƒèŠ‚è¯­é€Ÿ
1. ç”¨æˆ·æ‹–åŠ¨è¯­é€Ÿæ»‘å—
2. å®æ—¶æ˜¾ç¤ºå½“å‰è¯­é€Ÿå€¼
3. æ¾æ‰‹åè‡ªåŠ¨ä¿å­˜è®¾ç½®
4. ä¸‹æ¬¡æœ—è¯»æ—¶åº”ç”¨æ–°è¯­é€Ÿ

### è°ƒèŠ‚éŸ³é‡
1. ç”¨æˆ·æ‹–åŠ¨éŸ³é‡æ»‘å—
2. å®æ—¶æ˜¾ç¤ºå½“å‰éŸ³é‡å€¼
3. æ¾æ‰‹åè‡ªåŠ¨ä¿å­˜è®¾ç½®
4. ä¸‹æ¬¡æœ—è¯»æ—¶åº”ç”¨æ–°éŸ³é‡

---

## åŠ¨ç”»è§„èŒƒ

### é¡µé¢è¿›å…¥åŠ¨ç”»
```kotlin
// ä»å³ä¾§æ»‘å…¥
val offsetX by animateFloatAsState(
    targetValue = 0f,
    animationSpec = tween(
        durationMillis = 300,
        easing = FastOutSlowInEasing
    )
)
```

### è¯•å¬æŒ‰é’®åŠ¨ç”»
```kotlin
// æ’­æ”¾æ—¶è„‰å†²åŠ¨ç”»
val scale by infiniteTransition.animateFloat(
    initialValue = 1f,
    targetValue = 1.1f,
    animationSpec = infiniteRepeatable(
        animation = tween(500, easing = FastOutSlowInEasing),
        repeatMode = RepeatMode.Reverse
    )
)
```

### éŸ³è‰²å¡ç‰‡ç‚¹å‡»åŠ¨ç”»
```kotlin
val scale by animateFloatAsState(
    targetValue = if (isPressed) 0.98f else 1f,
    animationSpec = spring(
        dampingRatio = Spring.DampingRatioMediumBouncy
    )
)

val backgroundColor by animateColorAsState(
    targetValue = if (isPressed) Color(0xFF3A3A3A) else Color(0xFF2A2A2A),
    animationSpec = tween(200)
)
```

### æ»‘å—æ‹–åŠ¨åŠ¨ç”»
```kotlin
val sliderValue by animateFloatAsState(
    targetValue = targetValue,
    animationSpec = spring(
        dampingRatio = Spring.DampingRatioLowBouncy,
        stiffness = Spring.StiffnessLow
    )
)
```

---

## çŠ¶æ€ç®¡ç†

### éŸ³è‰²è®¾ç½®çŠ¶æ€
```kotlin
data class VoiceSettings(
    val selectedVoice: Voice,
    val speed: Float = 1.0f,
    val volume: Float = 0.8f,
    val isPlaying: Boolean = false
)

data class Voice(
    val id: String,
    val name: String,
    val displayName: String,
    val description: String,
    val gender: Gender,
    val accent: Accent,
    val sampleUrl: String
)

enum class Gender {
    MALE,   // ç”·å£°
    FEMALE  // å¥³å£°
}

enum class Accent {
    US,  // ç¾å¼
    UK,  // è‹±å¼
    AU   // æ¾³å¼
}
```

### ViewModel
```kotlin
class VoiceSettingsViewModel @Inject constructor(
    private val ttsService: TTSService,
    private val settingsRepository: SettingsRepository
) : ViewModel() {
    
    private val _uiState = MutableStateFlow(VoiceSettings())
    val uiState: StateFlow<VoiceSettings> = _uiState.asStateFlow()
    
    fun selectVoice(voice: Voice) {
        _uiState.update { it.copy(selectedVoice = voice) }
        saveSettings()
    }
    
    fun playVoiceSample(voice: Voice) {
        viewModelScope.launch {
            _uiState.update { it.copy(isPlaying = true) }
            ttsService.playSample(voice.sampleUrl)
            _uiState.update { it.copy(isPlaying = false) }
        }
    }
    
    fun updateSpeed(speed: Float) {
        _uiState.update { it.copy(speed = speed) }
        saveSettings()
    }
    
    fun updateVolume(volume: Float) {
        _uiState.update { it.copy(volume = volume) }
        saveSettings()
    }
    
    private fun saveSettings() {
        viewModelScope.launch {
            settingsRepository.saveVoiceSettings(_uiState.value)
        }
    }
}
```

---

## æ•°æ®æŒä¹…åŒ–

### ä½¿ç”¨ DataStore å­˜å‚¨
```kotlin
// ä¿å­˜éŸ³è‰²è®¾ç½®
suspend fun saveVoiceSettings(settings: VoiceSettings) {
    dataStore.edit { preferences ->
        preferences[VOICE_ID_KEY] = settings.selectedVoice.id
        preferences[VOICE_SPEED_KEY] = settings.speed
        preferences[VOICE_VOLUME_KEY] = settings.volume
    }
}

// è¯»å–éŸ³è‰²è®¾ç½®
val voiceSettingsFlow: Flow<VoiceSettings> = dataStore.data.map { preferences ->
    VoiceSettings(
        selectedVoice = getVoiceById(
            preferences[VOICE_ID_KEY] ?: "emma"
        ),
        speed = preferences[VOICE_SPEED_KEY] ?: 1.0f,
        volume = preferences[VOICE_VOLUME_KEY] ?: 0.8f
    )
}
```

---

## æ— éšœç¢æ”¯æŒ

### è¯­ä¹‰åŒ–æ ‡ç­¾
```kotlin
// éŸ³è‰²å¡ç‰‡
Card(
    modifier = Modifier.semantics(mergeDescendants = true) {
        contentDescription = "${voice.displayName}ï¼Œ${voice.description}"
        role = Role.Button
    }
)

// è¯•å¬æŒ‰é’®
Button(
    modifier = Modifier.semantics {
        contentDescription = "è¯•å¬${voice.displayName}éŸ³è‰²"
        role = Role.Button
    }
)

// è¯­é€Ÿæ»‘å—
Slider(
    modifier = Modifier.semantics {
        contentDescription = "è¯­é€Ÿè°ƒèŠ‚ï¼Œå½“å‰${speed}å€é€Ÿ"
    }
)

// éŸ³é‡æ»‘å—
Slider(
    modifier = Modifier.semantics {
        contentDescription = "éŸ³é‡è°ƒèŠ‚ï¼Œå½“å‰${volume}%"
    }
)
```

---

## å®ç°ä¼˜å…ˆçº§

### Phase 1 - åŸºç¡€åŠŸèƒ½
1. éŸ³è‰²åˆ—è¡¨æ˜¾ç¤º
2. éŸ³è‰²é€‰æ‹©åŠŸèƒ½
3. è®¾ç½®ä¿å­˜å’Œè¯»å–

### Phase 2 - å®Œæ•´åŠŸèƒ½
1. éŸ³è‰²è¯•å¬åŠŸèƒ½
2. è¯­é€Ÿè°ƒèŠ‚
3. éŸ³é‡è°ƒèŠ‚
4. æ’­æ”¾åŠ¨ç”»

### Phase 3 - ä¼˜åŒ–
1. éŸ³è‰²é¢„åŠ è½½
2. æ€§èƒ½ä¼˜åŒ–
3. æ— éšœç¢æ”¯æŒ
4. é”™è¯¯å¤„ç†
